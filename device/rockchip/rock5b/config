. ${OURDIR}/device/rockchip/generic/config
unset KERNELBUNDLE

# FIXME port the scripts in u-boot/arch/arm/mach-rockchip to python 3
HOSTDEPS="$HOSTDEPS python2"
HOSTDEPS="$HOSTDEPS parted"
HWPACKAGES_gui="mali-g610-firmware"
# For rtl_nic/rtl8125b-2.fw -- FIXME kernel-firmware-extra needs to be split
HWPACKAGES="kernel-firmware-extra"
DRACUT_EXTRAS="-I /lib/firmware/mali_csffw.bin -I /lib/firmware/rtl_nic/rtl8125b-2.fw.xz -I /lib/firmware/rtw89/rtw8852b_fw.bin.xz -I /lib/firmware/rtw89/rtw8852b_fw-1.bin.xz"
# Official repository supported by Radxa:
#KERNEL="https://github.com/radxa/kernel.git#linux-5.10-gen-rkr4.1"
#KERNEL_CONFIG="rockchip_linux_defconfig"
# Similar forks:
#KERNEL="https://gitlab.com/rk3588_linux/rk/kernel.git#linux-5.10-gen-rkr3.6"
#KERNEL_CONFIG="rockchip_linux_defconfig"
# Far ahead of Radxa
#KERNEL="https://gitlab.freedesktop.org/panfrost/linux.git#panthor-v3+rk3588-evb1"
# Fork of the above -- working Open Source graphics, 6.6 based
#KERNEL="https://github.com/OpenMandrivaSoftware/linux.git#panthor-v3+rk3588-evb1-6.6.2-omv"
# Experimental rebase, display not yet working (clash between panthor and upstream drm changes)
#KERNEL="https://github.com/OpenMandrivaSoftware/linux.git#rk3588-vop2-hdmi-upstream-linux-6.7-rc1-2023-11-14+panthor+omv"
# Fork of https://github.com/hbiyik/linux/tree/panthor+mpp+nodevfreq
KERNEL="https://github.com/OpenMandrivaSoftware/linux.git#rk3588-6.7-panthor-mpp-omv"
KERNEL_CONFIG="rk3588_panthor_release_defconfig"
#KERNEL="https://github.com/Googulator/linux-rk3588-midstream.git#pancsf-midstream"
#KERNEL="https://gitlab.freedesktop.org/bbrezillon/linux.git#pancsf"
#KERNEL_CONFIG="rk3588_display_defconfig"
KERNEL_EXTRACONFIG="--enable SYNC_FILE --disable DRM_PANFROST --enable DRM_PANTHOR --enable FW_LOADER_COMPRESS --enable FW_LOADER_COMPRESS_XZ --enable FW_LOADER_COMPRESS_ZSTD --enable FW_UPLOAD --enable XZ_DEC --enable XZ_DEC_ARM --enable DECOMPRESS_XZ --module SOUND --module SND --disable SND_UMP_LEGACY_RAWMIDI --disable SND_OSSEMUL --module SND_HRTIMER --enable SND_DYNAMIC_MINORS --set-val SND_MAX_CARDS 8 --disable SND_SUPPORT_OLD_API --enable SND_VERBOSE_PROCFS --disable SND_VERBOSE_PRINTK --disable SND_DEBUG --disable SND_CTL_INPUT_VALIDATION --module SND_SEQUENCER --module SND_SEQ_DUMMY --module SND_SEQUENCER_OSS --enable SND_SEQ_HRTIMER_DEFAULT --enable SND_SEQ_UMP --enable SND_DRIVERS --disable SND_DUMMY --module SND_ALOOP --module SND_PCMTEST --module SND_VIRMIDI --module SND_MTPAV --module SND_SERIAL_U16550 --module SND_SERIAL_GENERIC --module SND_MPU401 --enable SND_AC97_POWER_SAVE --set-val SND_AC97_POWER_SAVE_DEFAULT 0 --disable SND_PCI --set-val SND_HDA_PREALLOC_SIZE 64 --disable SND_SPI --enable SND_USB --module SND_USB_AUDIO --enable SND_USB_AUDIO_MIDI_V2 --module SND_USB_UA101 --module SND_USB_CAIAQ --enable SND_USB_CAIAQ_INPUT --module SND_USB_6FIRE --module SND_USB_HIFACE --module SND_BCD2000 --module SND_USB_POD --module SND_USB_PODHD --module SND_USB_TONEPORT --module SND_USB_VARIAX --module SND_SOC --disable SND_SOC_ADI --disable SND_SOC_AMD_ACP --disable SND_AMD_ACP_CONFIG --disable SND_ATMEL_SOC --disable SND_BCM63XX_I2S_WHISTLER --disable SND_DESIGNWARE_I2S --disable SND_SOC_FSL_ASRC --disable SND_SOC_FSL_SAI --disable SND_SOC_FSL_AUDMIX --disable SND_SOC_FSL_SSI --disable SND_SOC_FSL_SPDIF --disable SND_SOC_FSL_ESAI --disable SND_SOC_FSL_MICFIL --disable SND_SOC_FSL_XCVR --disable SND_SOC_FSL_RPMSG --disable SND_SOC_IMX_AUDMUX --disable SND_SOC_CHV3_I2S --disable SND_I2S_HI6210_I2S --disable SND_SOC_IMG --disable SND_SOC_MTK_BTCVSD --module SND_SOC_ROCKCHIP --module SND_SOC_ROCKCHIP_HDMI --module SND_SOC_ROCKCHIP_I2S --module SND_SOC_ROCKCHIP_I2S_TDM --module SND_SOC_ROCKCHIP_PDM --module SND_SOC_ROCKCHIP_SPDIF --module SND_SOC_ROCKCHIP_RT5645 --enable SND_SOC_SOF_TOPLEVEL --disable SND_SOC_SOF_PCI --disable SND_SOC_SOF_ACPI --disable SND_SOC_SOF_OF --disable SND_SOC_XILINX_I2S --disable SND_SOC_XILINX_AUDIO_FORMATTER --disable SND_SOC_XILINX_SPDIF --disable SND_SOC_XTFPGA_I2S --disable SND_SOC_AC97_CODEC --disable SND_SOC_ADAU1372_I2C --disable SND_SOC_ADAU1372_SPI --disable SND_SOC_ADAU1701 --disable SND_SOC_ADAU1761_I2C --disable SND_SOC_ADAU1761_SPI --disable SND_SOC_ADAU7002 --disable SND_SOC_ADAU7118_HW --disable SND_SOC_ADAU7118_I2C --disable SND_SOC_AK4101 --disable SND_SOC_AK4118 --disable SND_SOC_AK4375 --disable SND_SOC_AK4458 --disable SND_SOC_AK4554 --disable SND_SOC_AK4613 --disable SND_SOC_AK4642 --disable SND_SOC_AK5386 --disable SND_SOC_AK5558 --disable SND_SOC_ALC5623 --disable SND_SOC_AW8738 --disable SND_SOC_AW88395 --disable SND_SOC_BD28623 --disable SND_SOC_BT_SCO --disable SND_SOC_CHV3_CODEC --disable SND_SOC_CROS_EC_CODEC --disable SND_SOC_CS35L32 --disable SND_SOC_CS35L33 --disable SND_SOC_CS35L34 --disable SND_SOC_CS35L35 --disable SND_SOC_CS35L36 --disable SND_SOC_C35L41_SPI --disable SND_SOC_C35L41_I2C --disable SND_SOC_CS35L45_SPI --disable SND_SOC_CS35L45_I2C --module SND_SOC_ES8316 --module SND_SOC_HDMI_CODEC --module SND_SOC_HDAC_HDMI --module SND_HDA_CODEC_HDMI --module SND_HDA_CODEC --module SND_SOC_ROCKCHIP_MAX98090 --module DRM_DW_HDMI --module DRM_DW_HDMI_GP_AUDIO --module DRM_DW_HDMI_I2S_AUDIO --module DRM_DW_HDMI_AHB_AUDIO --module BT_HCIBTUSB --module RTW89 --module RTW89_8851BE --module RTW89_8852AE --module RTW89_8852BE --module RTW89_8852CE --disable RTW89_DEBUGMSG --disable RTW89_DEBUGFS --disable TOUCHSCREEN_WM97XX --disable DRM_I2C_ADV7511_AUDIO --disable SND_SOC_AK4104 --disable SND_SOC_CS35L41_SPI --disable SND_SOC_CS35L41_I2C --disable SND_SOC_CS35L56_I2C --disable SND_SOC_CS35L56_SPI --disable SND_SOC_CS42L42 --disable SND_SOC_CS42L51_I2C --disable SND_SOC_CS42L52 --disable SND_SOC_CS42L56 --disable SND_SOC_CS42L73 --disable SND_SOC_CS42L83 --disable SND_SOC_CS4234 --disable SND_SOC_CS4265 --disable SND_SOC_CS4270 --disable SND_SOC_CS4271_I2C --disable SND_SOC_CS4271_SPI --disable SND_SOC_CS42XX8_I2C --disable SND_SOC_CS43130 --disable SND_SOC_CS4341 --disable SND_SOC_CS4349 --disable SND_SOC_CS53L30 --disable SND_SOC_CX2072X --disable SND_SOC_DA7213 --disable SND_SOC_ES7134 --disable SND_SOC_ES7241 --disable SND_SOC_ES8326 --disable SND_SOC_GTM601 --disable SND_SOC_ICS43432 --disable SND_SOC_IDT821034 --disable SND_SOC_INNO_RK3036 --disable SND_SOC_MAX98927 --disable SND_SOC_MAX98520 --disable SND_SOC_MAX98373_I2C --disable SND_SOC_MAX98388 --disable SND_SOC_MAX98390 --disable SND_SOC_MAX98396 --disable SND_SOC_MAX9860 --disable SND_SOC_MSM8916_WCD_ANALOG --disable SND_SOC_MSM8916_WCD_DIGITAL --disable SND_SOC_PCM1681 --disable SND_SOC_PCM1789_I2C --disable SND_SOC_PCM179X_I2C --disable SND_SOC_PCM179X_SPI --disable SND_SOC_PCM186X_I2C --disable SND_SOC_PCM186X_SPI --disable SND_SOC_PCM3060_I2C --disable SND_SOC_PCM3060_SPI --disable SND_SOC_PCM3168A_I2C --disable SND_SOC_PCM3168A_SPI --disable SND_SOC_PCM5102A --disable SND_SOC_PCM512X_I2C --disable SND_SOC_PCM512X_I2C --disable SND_SOC_PCM512X_SPI --disable SND_SOC_PEB2466 --disable SND_SOC_RT9120 --disable SND_SOC_SGTL5000 --module SND_SOC_SIMPLE_AMPLIFIER --module SND_SOC_SIMPLE_MUX --disable SND_SOC_SMA1303 --module SND_SOC_SPDIF --disable SND_SOC_SRC4XXX_I2C --disable SND_SOC_SSM2305 --disable SND_SOC_SSM2518 --disable SND_SOC_SSM2602_SPI --disable SND_SOC_SSM2602_I2C --disable SND_SOC_SSM3515 --disable SND_SOC_SSM4567 --disable SND_SOC_STA32X --disable SND_SOC_STA350 --disable SND_SOC_STI_SAS --disable SND_SOC_TAS2552 --disable SND_SOC_TAS2562 --disable SND_SOC_TAS2764 --disable SND_SOC_TAS2770 --disable SND_SOC_TAS2780 --disable SND_SOC_TAS2781_I2C --disable SND_SOC_TAS5086 --disable SND_SOC_TAS571X --disable SND_SOC_TAS5720 --disable SND_SOC_TAS5805M --disable SND_SOC_TAS6424 --disable SND_SOC_TDA7419 --disable SND_SOC_TFA9879 --disable SND_SOC_TFA989X --disable SND_SOC_TLV320ADC3XXX --disable SND_SOC_TLV320AIC23_I2C --disable SND_SOC_TLV320AIC23_SPI --disable SND_SOC_TLV320AIC31XX --disable SND_SOC_TLV320AIC32X4_I2C --disable SND_SOC_TLV320AIC32X4_SPI --disable SND_SOC_TLV320AIC3X_I2C --disable SND_SOC_TLV320AIC3X_SPI --disable SND_SOC_TLV320ADCX140 --disable SND_HDA_HWDEP --enable SND_HDA_RECONFIG --enable SND_HDA_INPUT_BEEP --set-val SND_HDA_INPUT_BEEP_MODE 1 --enable SND_HDA_PATCH_LOADER --disable SND_HDA_SCODEC_CS35L41_I2C --disable SND_HDA_SCODEC_CS35L41_SPI --disable SND_HDA_CODEC_REALTEK --disable SND_HDA_CODEC_ANALOG --disable SND_HDA_CODEC_SIGMATEL --disable SND_HDA_CODEC_VIA --disable SND_HDA_CODEC_CIRRUS --disable SND_HDA_CODEC_CS8409 --disable SND_HDA_CODEC_CONEXANT --disable SND_HDA_CODEC_CA0110 --disable SND_HDA_CODEC_CA0132 --disable SND_HDA_CODEC_CMEDIA --disable SND_HDA_CODEC_SI3054 --module SND_HDA_GENERIC --set-val SND_HDA_POWER_SAVE_DEFAULT 10 --disable SND_SOC_PCM512x_I2C --disable SND_SOC_PCM512x_SPI --disable SND_SOC_TSCS42XX --disable SND_SOC_TSCS454 --disable SND_SOC_UDA1334 --disable SND_SOC_WCD9335 --disable SND_SOC_WCD934X --disable SND_SOC_WM8510 --disable SND_SOC_WM8523 --disable SND_SOC_WM8524 --disable SND_SOC_WM8580 --disable SND_SOC_WM8711 --disable SND_SOC_WM8728 --disable SND_SOC_WM8731_I2C --disable SND_SOC_WM8731_SPI --disable SND_SOC_WM8737 --disable SND_SOC_WM8741 --disable SND_SOC_WM8750 --disable SND_SOC_WM8753 --disable SND_SOC_WM8770 --disable SND_SOC_WM8776 --disable SND_SOC_WM8782 --disable SND_SOC_WM8804_I2C --disable SND_SOC_WM8804_SPI --disable SND_SOC_WM8903 --disable SND_SOC_WM8904 --disable SND_SOC_WM8940 --disable SND_SOC_WM8960 --disable SND_SOC_WM8961 --disable SND_SOC_WM8962 --disable SND_SOC_WM8974 --disable SND_SOC_WM8978 --disable SND_SOC_WM8985 --disable SND_SOC_ZL38060 --disable SND_SOC_MAX9759 --disable SND_SOC_MT6351 --disable SND_SOC_PCM512x_I2C --disable SND_SOC_PCM512x_SPI --disable SND_SOC_MT6358 --disable SND_SOC_MT6660 --disable SND_SOC_NAU8315 --disable SND_SOC_NAU8540 --disable SND_SOC_NAU8810 --disable SND_SOC_NAU8821 --disable SND_SOC_NAU8822 --disable SND_SOC_NAU8824 --disable SND_SOC_TPA6130A2 --disable SND_SOC_LPASS_WSA_MACRO --disable SND_SOC_LPASS_VA_MACRO --disable SND_SOC_LPASS_RX_MACRO --disable SND_SOC_LPASS_TX_MACRO --module SND_SIMPLE_CARD --module SND_AUDIO_GRAPH_CARD --module SND_AUDIO_GRAPH_CARD2 --module SND_AUDIO_GRAPH_CARD2_CUSTOM_SAMPLE --disable SND_TEST_COMPONENT --disable SND_XEN_FRONTEND --module SND_VIRTIO --module HID_PRODIKEYS --enable USB_CONFIGFS_F_UAC1 --disable USB_CONFIGFS_F_UAC1_LEGACY --enable USB_CONFIGFS_F_UAC2 --enable USB_CONFIGFS_F_MIDI --module USB_AUDIO --enable GADGET_UAC1 --disable GADGET_UAC1_LEGACY --module USB_MIDI_GADGET --disable SND_SOC_PCM512x_I2C --disable SND_SOC_PCM512x_SPI --disable SND_SOC_PCM512x_I2C --disable SND_SOC_PCM512x_SPI --disable SND_HDA_SCODEC_CS35L56_I2C --disable SND_HDA_SCODEC_CS35L56_SPI --disable SND_HDA_SCODEC_TAS2781_I2C --disable SND_SOC_AW88261 --disable SND_SOC_PCM512x_I2C --disable SND_SOC_PCM512x_SPI --enable USB_CONFIGFS_F_MIDI2 --enable PHY_ROCKCHIP_SAMSUNG_HDPTX_HDMI --disable SND_SOC_AW87390 --disable SND_SOC_AW88399 --disable SND_SOC_PCM512x_I2C --disable SND_SOC_PCM512x_SPI --disable SND_SOC_RTQ9128 --disable SND_SOC_RK3288_HDMI_ANALOG --disable SND_SOC_RK3399_GRU_SOUND --disable SND_SOC_DMIC --disable SND_SOC_ES8328_I2C --disable SND_SOC_ES8328_SPI --disable SND_SOC_HDA --disable SND_SOC_MAX98088 --disable SND_SOC_MAX98357A --disable SND_SOC_MAX98504 --disable SND_SOC_MAX9867 --disable SND_SOC_PCM512x_I2C --disable SND_SOC_PCM512x_SPI --disable SND_SOC_RK3328 --disable SND_SOC_RK817 --disable SND_SOC_RT5616 --disable SND_SOC_RT5631 --disable SND_SOC_RT5640 --disable SND_SOC_RT5659"
# Needed to fix warnings with gcc > 10
# Should be fixed properly, preferably by updating to a
# 6.x kernel
#KERNEL_EXTRA_CFLAGS_GCC="-Wno-array-compare -Wno-dangling-pointer -Wno-address -Wno-stringop-overread"
KERNEL_GCC=yes
UBOOT="https://github.com/radxa/u-boot.git"
UBOOT_VERSION="stable-5.10-rock5"
UBOOT_CONFIG="rock-5b-rk3588_defconfig"
DTB="rockchip/rk3588-rock-5b"
CMDLINE="earlycon=uart8250,mmio32,0xfeb50000 console=ttyFIQ0 console=tty1 consoleblank=0 irqchip.gicv3_pseudo_nmi=0 switolb=1 coherent_pool=2M cgroup_enable=cpuset cgroup_memory=1 cgroup_enable=memory swapaccount=1"
