ARCH="aarch64"
# Let's support what people might drop into those PCI-E slots...
#HWPACKAGES="pciutils kernel-firmware kernel-firmware-extra iwlwifi-agn-ucode efibootmgr"
# kernel-firmware-extra is needed for the USB-C DisplayPort module (rockchip/dptx.bin)
HWPACKAGES="wpa_supplicant kernel-firmware-extra"
HWPACKAGES_gui="lib64dri-drivers-lima"
# https://xnux.eu/devices/pine64-pinephone.html
# Known good revision: 9422c45f7b9fb598a4d65ecc6e524e8022f2cb3a (5.7.10 based)
#KERNEL="https://gitlab.com/pine64-org/linux.git#pine64-kernel-5.7.y"
# Known good revision: db16c398a809ac303e7693f2f46ad20fad11d39a (5.10-rc based)
#KERNEL="https://github.com/megous/linux.git#orange-pi-5.12"
KERNEL="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git#orange-pi-6.6"
KERNELBUNDLE="https://xff.cz/kernels/git/orange-pi-active.bundle"
KERNEL_CONFIG="pinebook_pro_defconfig"
# KERNEL_CONFIG="pine64_defconfig" for kernel from gitlab.org/pine64-org
KERNELTARGET=Image
DTB="rockchip/rk3399-pinebook-pro"
UBOOT="https://megous.com/git/u-boot"
UBOOT_CONFIG="pinebook-pro-rk3399_defconfig"
# Known good u-boot revision: d40120e18c49bb927114b575c610ed0beaf3ee33
# but let's follow master
# UBOOT_VERSION=d40120e18c49bb927114b575c610ed0beaf3ee33
# Make sure we have NVM-E -- we may also want to enable various USB devices
# PCI is required by NVM-E
KERNEL_EXTRACONFIG="--enable NVM --enable NVM_PBLK --disable NVM_PBLK_DEBUG --enable NVME_CORE --enable BLK_DEV_NVME --enable NVME_MULTIPATH --enable NVME_HWMON --enable PCI --module FUSE_FS --module FW_CFG_SYSFS --enable FW_CFG_SYSFS_CMDLINE --enable PCIEPORTBUS --module BPFILTER_UMH --enable PCIEAER --disable PCIEAER_INJECT --disable PCIE_ECRC --disable PCIEASPM_PERFORMANCE --enable PCIEASPM_DEFAULT --disable PCIEASPM_POWERSAVE --disable PCIEASPM_POWER_SUPERSAVE --disable PCIE_DPC --disable PCIE_PTM --enable PCIE_BW --disable PCI_DEBUG --disable PCI_STUB --disable PCI_IOV --disable PCI_PRI --disable PCI_PASID --disable HOTPLUG_PCI --disable PCI_FTPCI100 --disable PCI_HOST_GENERIC --disable PCIE_XILINX --disable PCI_XGENE --disable PCIE_ALTERA --disable PCI_HOST_THUNDER_PEM --disable PCI_HOST_THUNDER_ECAM --enable PCIE_ROCKCHIP_HOST --disable PCIE_DW_PLAT_HOST --disable PCI_HISI --disable PCIE_KIRIN --disable PCI_MESON --disable PCIE_AL --disable PCIE_LAYERSCAPE_GEN4 --disable PCIE_CADENCE_PLAT_HOST --disable PCI_J721E_HOST --disable PCI_ENDPOINT --disable PCI_SW_SWITCHTEC --disable RAPIDIO --disable BLK_DEV_PCIESSD_MTIP32XX --disable BLK_DEV_UMEM --disable BLK_DEV_SKD --disable BLK_DEV_SX8 --disable BLK_DEV_RSXX --module NVME_TCP --disable PHANTOM --disable TIFM_CORE --disable HP_ILO --disable PCI_ENDPOINT_TEST --disable CB710_CORE --disable GENWQE --disable MISC_ALCOR_PCI --disable MISC_RTSX_PCI --disable HABANA_AI --disable FUSION --disable FIREWIRE --disable FIREWIRE_NOSY --disable NET_FC --disable ARCNET --disable FDDI --disable HIPPI --disable BRCMFMAC_PCIE --disable VMXNET3 --disable SERIAL_8250_PCI --disable SERIAL_JSM --disable SERIAL_RP2 --disable NOZOMI --disable APPLICOM --disable DEVPORT --disable I2C_ALI1535 --disable I2C_ALI1563 --disable I2C_ALI15X3 --disable I2C_AMD756 --disable I2C_AMD8111 --disable I2C_I801 --disable I2C_ISCH --disable I2C_PIIX4 --disable I2C_NFORCE2 --disable I2C_NVIDIA_GPU --disable I2C_SIS5595 --disable I2C_SIS630 --disable I2C_SIS96X --disable I2C_VIA --disable I2C_VIAPRO --disable I2C_DESIGNWARE_PCI --disable I2C_THUNDERX --disable SPI_PXA2XX --disable SPI_THUNDERX --disable GPIO_BT8XX --disable GPIO_PCI_IDIO_16 --disable GPIO_PCIE_IDIO_24 --disable GPIO_RDC321X --disable SENSORS_I5K_AMB --disable SENSORS_SIS5595 --disable SENSORS_VIA686A --disable SENSORS_VT8231 --disable ALIM7101_WDT --disable I6300ESB_WDT --disable PCIPCWATCHDOG --disable WDTPCI --disable LPC_ICH --disable LPC_SCH --disable MFD_INTEL_PMT --disable MFD_JANZ_CMODIO --disable MFD_RDC321X --disable MFD_VX855 --disable MEDIA_PCI_SUPPORT --disable VIDEO_CAFE_CCIC --set-val VGA_ARB_MAX_GPUS 16 --disable DRM_RADEON --disable DRM_AMDGPU --disable DRM_NOUVEAU --disable DRM_AST --disable DRM_MGAG200 --disable DRM_QXL --disable DRM_BOCHS --disable DRM_HISI_HIBMC --disable DRM_CIRRUS_QEMU --disable FB_CIRRUS --disable FB_PM2 --disable FB_CYBER2000 --disable FB_ASILIANT --disable FB_IMSTT --disable FB_UVESA --disable FB_NVIDIA --disable FB_RIVA --disable FB_I740 --disable FB_MATROX --disable FB_RADEON --disable FB_ATY128 --disable FB_ATY --disable FB_S3 --disable FB_SAVAGE --disable FB_SIS --disable FB_NEOMAGIC --disable FB_KYRO --disable FB_3DFX --disable FB_VOODOO1 --disable FB_VT8623 --disable FB_TRIDENT --disable FB_ARK --disable FB_PM3 --disable FB_CARMINE --disable FB_MB862XX --disable FB_SM712 --disable SND_PCI --disable USB_PCI --disable MMC_SDHCI_PCI --disable MMC_TIFM_SD --disable MMC_CB710 --disable MMC_VIA_SDMMC --disable MMC_DW_PCI --disable MMC_TOSHIBA_PCI --module EDAC --disable EDAC_LEGACY_SYSFS --disable EDAC_DEBUG --disable EDAC_THUNDERX --disable EDAC_XGENE --disable EDAC_DMC520 --disable HISI_DMA --disable PLX_DMA --disable DW_DMAC_PCI --disable DW_EDMA --disable DW_EDMA_PCIE --disable RTL8192U --disable RTS5208 --disable VT6655 --disable FB_SM750 --disable VIDEO_ZORAN --disable STAGING_GASKET_FRAMEWORK --disable NTB --disable VME_BUS --disable USB4 --disable CRYPTO_DEV_NITROX_CNN55XX --disable CRYPTO_DEV_CAVIUM_ZIP --set-val EXTRA_FIRMWARE_DIR \\\"`pwd`/kernel/linux-firmware\\\" --set-val INPUT_MOUSEDEV_SCREEN_X 1920 --set-val INPUT_MOUSEDEV_SCREEN_Y 1080 --enable MODULE_DECOMPRESS --module ZBUD --disable NETFILTER_XTABLES_COMPAT --module NET_ACT_IPT --enable FW_LOADER_COMPRESS_XZ --enable FW_LOADER_COMPRESS_ZSTD"
# Enable some more options people may need
# In particular enough to make docker happy
KERNEL_EXTRACONFIG="$KERNEL_EXTRACONFIG --module BINFMT_MISC --enable CFS_BANDWIDTH --disable RT_GROUP_SCHED --enable RELAY --disable RD_LZ4 --enable KEXEC --enable KEXEC_FILE --disable KEXEC_SIG --enable CPU_IDLE_GOV_TEO --disable CPU_FREQ_DEFAULT_GOV_PERFORMANCE --enable CPU_FREQ_DEFAULT_GOV_ONDEMAND --enable MODULE_COMPRESS --disable MODULE_COMPRESS_GZIP --enable MODULE_COMPRESS_XZ --module MQ_IOSCHED_DEADLINE --module MQ_IOSCHED_KYBER --module BINFMT_MISC --enable KSM --enable TRANSPARENT_HUGEPAGE --enable TRANSPARENT_HUGEPAGE_ALWAYS --disable TRANSPARENT_HUGEPAGE_MADVISE --enable FRONTSWAP --enable ZSWAP --disable ZSWAP_COMPRESSOR_DEFAULT_DEFLATE --disable ZSWAP_COMPRESSOR_DEFAULT_LZO --disable ZSWAP_COMPRESSOR_DEFAULT_842 --disable ZSWAP_COMPRESSOR_DEFAULT_LZ4 --disable ZSWAP_COMPRESSOR_DEFAULT_LZ4HC --enable ZSWAP_COMPRESSOR_DEFAULT_ZSTD --enable ZSWAP_DEFAULT_ON --disable ZSWAP_ZPOOL_DEFAULT_ZBUD --enable ZSWAP_ZPOOL_DEFAULT_Z3FOLD --disable ZSWAP_ZPOOL_DEFAULT_ZSMALLOC --disable READ_ONLY_THP_FOR_FS --module NET_IPIP --module NET_IPGRE_DEMUX --module NET_IPGRE --enable NET_IPGRE_BROADCAST --enable IP_MROUTE --enable IP_MROUTE_MULTIPLE_TABLES --enable IP_PIMSM_V1 --enable IP_PIMSM_V2 --module NET_IPVTI --module NET_FOU --enable NET_FOU_IP_TUNNELS --module INET_AH --module INET_ESP --module INET_ESP_OFFLOAD --enable INET_ESPINTCP --module INET_IPCOMP --module INET_DIAG --module INET_UDP_DIAG --module INET_RAW_DIAG --enable INET_DIAG_DESTROY --module IPV6_GRE --module IP_DCCP --disable IP_DCCP_CCID2_DEBUG --enable IP_DCCP_CCID3 --disable IP_DCCP_CCID3_DEBUG --disable IP_DCCP_DEBUG --module IP_SCTP --disable SCTP_DBG_OBJCNT --enable SCTP_DEFAULT_COOKIE_HMAC_MD5 --disable SCTP_DEFAULT_COOKIE_HMAC_SHA1 --disable SCTP_DEFAULT_COOKIE_HMAC_NONE --enable SCTP_COOKIE_HMAC_SHA1 --module RDS --module RDS_TCP --disable RDS_DEBUG --module TIPC --enable TIPC_MEDIA_UDP --enable TIPC_CRYPTO --module TIPC_DIAG --module 6LOWPAN --disable 6LOWPAN_DEBUGFS --module 6LOWPAN_NHC --module 6LOWPAN_NHC_DEST --module 6LOWPAN_NHC_FRAGMENT --module 6LOWPAN_NHC_HOP --module 6LOWPAN_NHC_IPV6 --module 6LOWPAN_NHC_MOBILITY --module 6LOWPAN_NHC_ROUTING --module 6LOWPAN_NHC_UDP --module 6LOWPAN_GHC_EXT_HDR_HOP --module 6LOWPAN_GHC_UDP --module 6LOWPAN_GHC_ICMPV6 --module 6LOWPAN_GHC_EXT_HDR_DEST --module 6LOWPAN_GHC_EXT_HDR_FRAG --module 6LOWPAN_GHC_EXT_HDR_ROUTE --module DNS_RESOLVER --enable MAC80211_MESH --enable LWTUNNEL --enable LWTUNNEL_BPF --enable FW_LOADER_COMPRESS --module CONNECTOR --module DRM_UDL --disable PWM_DWC --module IP_NF_IPTABLES --module IP_NF_MATCH_AH --module IP_NF_MATCH_ECN --module IP_NF_MATCH_RPFILTER --module IP_NF_MATCH_TTL --module IP_NF_FILTER --module IP_NF_TARGET_REJECT --module IP_NF_TARGET_SYNPROXY --module IP_NF_NAT --module IP_NF_TARGET_MASQUERADE --module IP_NF_TARGET_NETMAP --module IP_NF_TARGET_REDIRECT --module IP_NF_MANGLE --module IP_NF_TARGET_CLUSTERIP --module IP_NF_TARGET_ECN --module IP_NF_TARGET_TTL --module IP_NF_RAW --module IP_NF_ARPTABLES --module IP_NF_ARPFILTER --module IP_NF_ARP_MANGLE --module IP6_NF_IPTABLES --module IP6_NF_MATCH_AH --module IP6_NF_MATCH_EUI64 --module IP6_NF_MATCH_FRAG --module IP6_NF_MATCH_OPTS --module IP6_NF_MATCH_HL --module IP6_NF_MATCH_IPV6HEADER --module IP6_NF_MATCH_MH --module IV6_NF_MATCH_NH --module IP6_NF_MATCH_RT --module IP6_NF_MATCH_SRH --module IP6_NF_FILTER --module IP6_NF_TARGET_REJECT --module IP6_NF_TARGET_SYNPROXY --module IP6_NF_MANGLE --module IP6_NF_RAW --module IP6_NF_NAT --module IP6_NF_TARGET_MASQUERADE --module IP6_NF_TARGET_NPT --module IP6_NF_MATCH_RPFILTER --module IP6_NF_TARGET_HL --module NFT_COMPAT --module NETFILTER_XT_MARK --module NETFILTER_XT_CONNMARK --module NETFILTER_XT_SET --module NETFILTER_XT_TARGET_CLASSIFY --module NETFILTER_XT_TARGET_CONNMARK --module NETFILTER_XT_TARGET_HMARK --module NETFILTER_XT_TARGET_IDLETIMER --module NETFILTER_XT_TARGET_LED --module NETFILTER_XT_TARGET_LOG --module NETFILTER_XT_TARGET_MARK --module NETFILTER_XT_NAT --module NETFILTER_XT_TARGET_NETMAP --module NETFILTER_XT_TARGET_NFLOG --module NETFILTER_XT_TARGET_NFQUEUE --module NETFILTER_XT_TARGET_RATEEST --module NETFILTER_XT_TARGET_REDIRECT --module NETFILTER_XT_TARGET_MASQUERADE --module NETFILTER_XT_TARGET_TEE --module NETFILTER_XT_TARGET_TCPMSS --module NETFILTER_XT_MATCH_ADDRTYPE --module NETFILTER_XT_MATCH_BPF --module NETFILTER_XT_MATCH_CGROUP --module NETFILTER_XT_MATCH_CLUSTER --module NETFILTER_XT_MATCH_COMMENT --module NETFILTER_XT_MATCH_CONNBYTES --module NETFILTER_XT_MATCH_CONNLABEL --module NETFILTER_XT_MATCH_CONNLIMIT --module NETFILTER_XT_MATCH_CONNMARK --module NETFILTER_XT_MATCH_CONNTRACK --module NETFILTER_XT_MATCH_CPU --module NETFILTER_XT_MATCH_DCCP --module NETFILTER_XT_MATCH_DEVGROUP --module NETFILTER_XT_MATCH_DSCP --module NETFILTER_XT_MATCH_ECN --module NETFILTER_XT_MATCH_ESP --module NETFILTER_XT_MATCH_HASHLIMIT --module NETFILTER_XT_MATCH_HELPER --module NETFILTER_XT_MATCH_HL --module NETFILTER_XT_MATCH_IPCOMP --module NETFILTER_XT_MATCH_IPRANGE --module NETFILTER_XT_MATCH_L2TP --module NETFILTER_XT_MATCH_LENGTH --module NETFILTER_XT_MATCH_LIMIT --module NETFILTER_XT_MATCH_MAC --module NETFILTER_XT_MATCH_MARK --module NETFILTER_XT_MATCH_MULTIPORT --module NETFILTER_XT_MATCH_NFACCT --module NETFILTER_XT_MATCH_OSF --module NETFILTER_XT_MATCH_OWNER --module NETFILTER_XT_MATCH_POLICY --module NETFILTER_XT_MATCH_PKTTYPE --module NETFILTER_XT_MATCH_QUOTA --module NETFILTER_XT_MATCH_RATEEST --module NETFILTER_XT_MATCH_REALM --module NETFILTER_XT_MATCH_RECENT --module NETFILTER_XT_MATCH_SCTP --module NETFILTER_XT_MATCH_SOCKET --module NETFILTER_XT_MATCH_STATE --module NETFILTER_XT_MATCH_STATISTIC --module NETFILTER_XT_MATCH_STRING --module NETFILTER_XT_MATCH_TCPMSS --module NETFILTER_XT_MATCH_TIME --module NETFILTER_XT_MATCH_U32 --module NETFILTER_XT_TARGET_CHECKSUM --module NETFILTER_XT_TARGET_CT --module NETFILTER_XT_TARGET_DSCP --module NETFILTER_XT_TARGET_NOTRACK --module NETFILTER_XT_TARGET_TPROXY --module NETFILTER_XT_TARGET_TRACE --module NETFILTER_XT_TARGET_TCPOPTSTRIP --module BRIDGE --module BRIDGE_NETFILTER --module NETFILTER_XT_MATCH_PHYSDEV --module NF_TABLES_BRIDGE --module NFT_BRIDGE_META --module NFT_BRIDGE_REJECT --module NF_LOG_BRIDGE --module BRIDGE_NF_EBTABLES --module BRIDGE_EBT_BROUTE --module BRIDGE_EBT_T_FILTER --module BRIDGE_EBT_T_NAT --module BRIDGE_EBT_802_3 --module BRIDGE_EBT_AMONG --module BRIDGE_EBT_ARP --module BRIDGE_EBT_IP --module BRIDGE_EBT_IP6 --module BRIDGE_EBT_LIMIT --module BRIDGE_EBT_MARK --module BRIDGE_EBT_PKTTYPE --module BRIDGE_EBT_STP --module BRIDGE_EBT_VLAN --module BRIDGE_EBT_ARPREPLY --module BRIDGE_EBT_DNAT --module BRIDGE_EBT_MARK_T --module BRIDGE_EBT_REDIRECT --module BRIDGE_EBT_SNAT --module BRIDGE_EBT_LOG --module BRIDGE_EBT_NFLOG --enable BRIDGE_IGMP_SNOOPING --enable BRIDGE_MRP --enable BRIDGE_CFM"
# Enable USB multimedia devices
KERNEL_EXTRACONFIG="$KERNEL_EXTRACONFIG --enable MEDIA_ANALOG_TV --enable MEDIA_DIGITAL_TV --enable MEDIA_RADIO_SUPPORT --enable MEDIA_SDR_SUPPORT --enable MEDIA_CONTROLLER_DVB --enable DVB_MMAP --module USB_GSPCA --module USB_M5602 --module USB_STV06XX --module USB_GL860 --module USB_GSPCA_BENQ --module USB_GSPCA_CONEX --module USB_GSPCA_CPIA1 --module USB_GSPCA_DTCS033 --module USB_GSPCA_ETOMS --module USB_GSPCA_FINEPIX --module USB_GSPCA_JEILINJ --module USB_GSPCA_JL2005BCD --module USB_GSPCA_KINECT --module USB_GSPCA_KONICA --module USB_GSPCA_MARS --module USB_GSPCA_MR97310A --module USB_GSPCA_NW80X --module USB_GSPCA_OV519 --module USB_GSPCA_OV534 --module USB_GSPCA_OV534_9 --module USB_GSPCA_PAC207 --module USB_GSPCA_PAC7302 --module USB_GSPCA_PAC7311 --module USB_GSPCA_SE401 --module USB_GSPCA_SN9C2028 --module USB_GSPCA_SN9C20X --module USB_GSPCA_SONIXB --module USB_GSPCA_SONIXJ --module USB_GSPCA_SPCA500 --module USB_GSPCA_SPCA501 --module USB_GSPCA_SPCA505 --module USB_GSPCA_SPCA506 --module USB_GSPCA_SPCA508 --module USB_GSPCA_SPCA561 --module USB_GSPCA_SPCA1528 --module USB_GSPCA_SQ905 --module USB_GSPCA_SQ905C --module USB_GSPCA_SQ930X --module USB_GSPCA_STK014 --module USB_GSPCA_STK1135 --module USB_GSPCA_STV0680 --module USB_GSPCA_SUNPLUS --module USB_GSPCA_T613 --module USB_GSPCA_TOPRO --module USB_GSPCA_TOUPTEK --module USB_GSPCA_TV8532 --module USB_GSPCA_VC032X --module USB_GSPCA_VICAM --module USB_GSPCA_XIRLINK_CIT --module USB_GSPCA_ZC3XX --module USB_PWC --disable USB_PWC_DEBUG --enable USB_PWC_INPUT_EVDEV --module VIDEO_CPIA2 --module USB_ZR364XX --module USB_STKWEBCAM --module USB_S2255 --module VIDEO_USBTV --module VIDEO_PVRUSB2 --module VIDEO_HDPVR --module VIDEO_STK1160_COMMON --module VIDEO_GO7007 --module VIDEO_GO7007_USB --module VIDEO_GO7007_USB_S2250_BOARD --module VIDEO_AU0828 --module VIDEO_CX231XX --module VIDEO_CX231XX_ALSA --module VIDEO_CX231XX_DVB --module VIDEO_EM28XX --module VIDEO_EM28XX_V4L2 --module VIDEO_EM28XX_ALSA --module USB_AIRSPY --module USB_HACKRF --module USB_MSI2500 --enable RADIO_ADAPTERS --module RADIO_SI470X --module USB_SI470X --disable I2C_SI470X --module RADIO_SI4713 --module USB_SI4713 --disable I2C_SI4713 --disable PLATFORM_SI4713 --module USB_MR800 --module USB_DSBR --module RADIO_MAXIRADIO --module RADIO_SHARK --module RADIO_SHARK2 --module USB_KEENE --module USB_RAREMONO --module USB_MA901 --module RADIO_TEA5764 --module RADIO_SAA7706H --module RADIO_TEF6862 --module RADIO_WL1273 --disable SDR_PLATFORM_DRIVERS --module SDR_MAX2175 --module MEDIA_TUNER_SIMPLE --module MEDIA_TUNER_TDA18250 --module MEDIA_TUNER_TDA8290 --module MEDIA_TUNER_TDA827X --module MEDIA_TUNER_TDA18271 --module MEDIA_TUNER_TDA9887 --module MEDIA_TUNER_TEA5761 --module MEDIA_TUNER_TEA5767 --module MEDIA_TUNER_MSI001 --module MEDIA_TUNER_MT20XX --module MEDIA_TUNER_MT2060 --module MEDIA_TUNER_MT2063 --module MEDIA_TUNER_MT2266 --module MEDIA_TUNER_MT2131 --module MEDIA_TUNER_QT1010 --module MEDIA_TUNER_XC2028 --module MEDIA_TUNER_XC5000 --module MEDIA_TUNER_XC4000 --module MEDIA_TUNER_MXL5005S --module MEDIA_TUNER_MXL5007T --module MEDIA_TUNER_MC44S803 --module MEDIA_TUNER_MAX2165 --module MEDIA_TUNER_TDA18218 --module MEDIA_TUNER_FC0011 --module MEDIA_TUNER_FC0012 --module MEDIA_TUNER_FC0013 --module MEDIA_TUNER_TDA18212 --module MEDIA_TUNER_E4000 --module MEDIA_TUNER_FC2580 --module MEDIA_TUNER_M88RS6000T --module MEDIA_TUNER_TUA9001 --module MEDIA_TUNER_SI2157 --module MEDIA_TUNER_IT913X --module MEDIA_TUNER_R820T --module MEDIA_TUNER_MXL301RF --module MEDIA_TUNER_QM1D1C0042 --module MEDIA_TUNER_QM1D1B0004"
# Modularize some things upstream builds into the kernel
KERNEL_EXTRACONFIG="$KERNEL_EXTRACONFIG --module CFG80211 --module MAC80211 --module BRCMUTIL --module BRCMFMAC --module USB_NET_DRIVERS --module USB_RTL8152 --module USB_USBNET --module USB_NET_CDCETHER --module USB_NET_CDC_EEM --module USB_NET_CDC_NCM --module USB_NET_CDC_MBIM --module VIDEO_DEV --module VIDEO_V4L2 --module SND_USB_AUDIO --module SND_SOC_ROCKCHIP --module SND_SOC_RK3399_GRU_SOUND --module SND_SOC_BT_SCO --module BT --module BT_BCM --module BT_HCIUART --module BLK_DEV_NBD --module CPU_FREQ_GOV_POWERSAVE --module CPU_FREQ_GOV_USERSPACE --module CPU_FREQ_GOV_ONDEMAND --module CPU_FREQ_GOV_CONSERVATIVE --enable EXT4_FS --module AUTOFS_FS --disable FAT_FS --module VFAT_FS --module EXFAT_FS --set-val EXFAT_DEFAULT_IOCHARSET \\\"utf8\\\" --module NTFS3_FS --enable NTFS3_LZX_XPRESS --enable NTFS3_POSIX_ACL --disable NTFS3_64BIT_CLUSTER --module SQUASHFS --module CRYPTO_SHA256_ARM64 --module CRYPTO_SHA512_ARM64  --module CRYPTO_SHA1_ARM64_CE --module CRYPTO_SHA2_ARM64_CE --module CRYPTO_SHA512_ARM64_CE --module CRYPTO_SHA3_ARM64 --module CRYPTO_SM3_ARM64_CE --module CRYPTO_SM4_ARM64_CE --module CRYPTO_GHASH_ARM64_CE --module CRYPTO_CRCT10DIF_ARM64_CE --module CRYPTO_AES_ARM64 --module CRYPTO_AES_ARM64_CE --module CRYPTO_AES_ARM64_CE_CCM --module CRYPTO_AES_ARM64_CE_BLK --module CRYPTO_AES_ARM64_CE --module CRYPTO_AES_ARM64_NEON_BLK --module CRYPTO_NHPOLY1305_NEON --module CRYPTO_AES_ARM64_BS --module IPV6 --module BT_RFCOMM --module BT_BNEP --module BT_HIDP --module BT_6LOWPAN --module SCSI --module BLK_DEV_SD --module BLK_DEV_SR --module BLK_DEV_SG --module CHR_DEV_SCH --module BLK_DEV_DM --module DM_CRYPT --module USB_VIDEO_CLASS"
# RK3399 has Cortex-A72 and Cortex-A53 CPUs. Both are ARMv8.0-A, so
# ARMv8.x (x>0) features will be disabled at runtime anyway
KERNEL_EXTRACONFIG="$KERNEL_EXTRACONFIG --disable ARM64_HW_AFDBM --disable ARM64_PAN --disable ARM64_LSE_ATOMICS --disable ARM64_USE_LSE_ATOMICS --disable ARM64_VHE --disable ARM64_UAO --disable ARM64_CNP --disable ARM64_AMU_EXTN --disable ARM64_TLB_RANGE --disable ARM64_MTE --disable ARM64_ERRATUM_1418040 --disable ARM64_ERRATUM_1508412 --disable CAVIUM_ERRATUM_23144"
CMDLINE="console=tty1 console=ttyS2,1500000 no_console_suspend earlycon=uart,mmio32,0x01c28000 panic=10 consoleblank=0 loglevel=1 cma=256M root=/dev/mmcblk1p2"
#NEED_INITRD=no
